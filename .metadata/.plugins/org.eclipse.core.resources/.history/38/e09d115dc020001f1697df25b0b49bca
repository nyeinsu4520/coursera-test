<!DOCTYPE html>
<html>
<head xmlns:th="http://www.thymeleaf.org">
<meta charset="ISO-8859-1">
<title>Cart</title>
<link href="/bootstrap/css/bootstrap.min.css">
<script type="text/javascript" src="bootstrap/js/bootstrap.bundle.min.js"></script>

</head>
<body>

	<div th:replace="@{fragment/header1}"></div>
	<div class="container">
	<div class="row">
            <h1 class="text-center">Shopping Cart</h1>
        </div>
        <div class="row mb-5">
            <div class="col-md-8">
                <div class="row m-3 border-top border-bottom fs-5">
                    <div class="col">ITEMS</div>
                    <div class="col">PRICE</div>
                    <div class="col">QUANTITY</div>
                    <div class="col">SUBTOTAL</div>
                </div>
                <div th:each="cartItem : ${cartItemList}" class="row m-3 border-bottom">
                    <div class="col">
                        <h5 th:text="${cartItem.item.name}"></h5>
                        <p th:text="${cartItem.item.description}"></p>
                        <img width="100px" th:src="@{/uploads/items/{id}/{imageName} (id=${cartItem.item.id}, imageName=${cartItem.item.imgname})}">
                    </div>
                    <div class="col">
                        <p th:text="${#numbers.formatDecimal(cartItem.item.price, 1, 'POINT')}"></p>
                    </div>
                    <div class="col">
                        <form th:action="@{/cart/update/{id} (id=${cartItem.id})}" method="post">
                            <input type="number" name="quantity" min="1" th:value="${cartItem.quantity}" class="form-control">
                            <input type="submit" value="Update Quantity" class="btn btn-primary btn-sm mt-2">
                        </form>
                        <a th:href="@{/cart/remove/{id} (id=${cartItem.id})}" class="btn btn-danger btn-sm mt-2">Remove Item</a>
                    </div>
                    <div class="col align-self-center">
                        <h3 th:text="${cartItem.subtotal}"></h3>
                    </div>
                </div>
            </div>
				<div class="col-4">
						<div class="row m-3 border-top border-bottom fw-bold">
							<div class="col text-center fs-3">ORDER SUMMARY</div>
						</div>
						<div class="row m-3 border-bottom fw-bold" th:each="cartItem:${cartItemList}">
							<div class="col text-center fs-6">
								<p th:text="${cartItem.item.name}+' x ' +${cartItem.quantity}"></p>
							</div>
							<div class="col fs-6 text-end">
								<p id="cartTotal" th:text="${cartItem.subtotal}" ></p>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<h2>TOTAL</h2>
							</div>
							<div class="col">
								<h2 th:text="${total}"></h2>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
</body>
</html>